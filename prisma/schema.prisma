// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider     = "mysql"
    url          = env("DATABASE_URL")
    relationMode = "prisma"
}

model User {
    id              Int      @id @default(autoincrement())
    email           String   @unique
    password        String
    phoneNumber     String   @unique
    firstName       String
    lastName        String
    additionalEmail String?  @unique
    middleName      String?
    arabicFullName  String?
    appointlet      String?
    bio             String?
    gsStatus        GsStatus @default(ACTIVE)
    joinDate        DateTime @default(now())
    positionId      Int
    position        Position @relation(fields: [positionId], references: [id])

    @@index([positionId])
}

model Squad {
    id          Int        @id @default(autoincrement())
    name        String
    gsName      String
    description String
    imageUrl    String
    positions   Position[]
}

model Position {
    id             Int     @id @default(autoincrement())
    name           String
    gsName         String
    jobDescription String
    weeklyHours    Int
    gsLevel        GsLevel
    squadId        Int
    squad          Squad   @relation(fields: [squadId], references: [id])
    users          User[]

    @@index([squadId])
}

model Task {
    id          Int      @id @default(autoincrement())
    title       String
    description String
    url         String
    deadline    DateTime
}

enum GsLevel {
    INTERN
    COORDINATOR
    SPECIALIST
    VETERAN
    REPRESENTATIVE
    ORCHESTRATOR
}

enum GsStatus {
    ACTIVE
    FREEZE
    LEFT
}
